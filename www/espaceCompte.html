<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>HotHotHot</title>
    <link rel="icon" type="image/png" href="/icons/webIcon.png">
    <script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
    <link rel="stylesheet" href="css/style.css">
    <link rel="manifest" href="manifest.webmanifest">
</head>
<body>
    <nav class="nav" role="menubar">
        <div class="nav-left">
            <div class="tabs">
                <a href="/" role="menuitem">Accueil</a>
                <a href="/doc.html" role="menuitem">Documentation</a>
            </div>
        </div>
    </div>
    <div class="nav-center">
        <a href="/" class="brand">ü•µ HotHotHot ü•∂</a>
    </div>
        <div class="nav-right">
            <a href="/espaceCompte.html" role="menuitem" class="button primary">Espace utilisateur</a>
    </div>
</nav>

<main class="container">
    <br>
    <div class="card">
        <div class="text-center">
                <h1>Espace utilisateur</h1>
            <a class="text-green">Gestion de compte</a>
        </div>
    </div>
    <br> <br>
    <div class="card">
        <h4 class="text-success">Connexion/D√©connexion</h4>
        <p>Votre statut actuel est : <a id="isConnected">D√©connect√©</a></p>
        <a class="button primary" id="boutonConnexion" >Se connecter</a>
    </div>
    <br>
    <div class="card" id="infoCompte" style="display: none;">
        <h4 class="text-success">Information du compte : </h4>
        <img id="pfp" class="is-rounded" src="/img/raccoon-1.jpg" style="width: 250px; height: 250px; object-fit: cover;">
        <p>Nom : <span id="name"></span></p>
        <p>Pr√©nom : <span id="surname"></span></p>
        <p>Compte cr√©√© le : 19/04/2021</p>
    </div>
</main>
<script>
    document.getElementById("boutonConnexion").addEventListener("click", event => {
        if (document.getElementById("boutonConnexion").innerHTML === "Se connecter"){
            document.getElementById("boutonConnexion").innerHTML = "Se d√©connecter";
            document.getElementById("boutonConnexion").classList = "button error";
            document.getElementById("isConnected").innerHTML = "Connect√©";
            document.getElementById("isConnected").classList = "text-success";
            fetch("https://api.ozeliurs.com/fake")
            .then((response) => {
                if (!response.ok) {
                    throw new Error(`Request failed with status ${reponse.status}`)
                };
                return response.json();
            })
            .then((data) => {
                document.getElementById("name").innerHTML = data.name;
                document.getElementById("surname").innerHTML = data.surname;
                document.getElementById("pfp").src = data.profile_picture;
            })
            .catch((error) => console.log(error));
            document.getElementById("infoCompte").style.display = "block";
        }
        else{
            document.getElementById("boutonConnexion").innerHTML = "Se connecter";
            document.getElementById("boutonConnexion").classList = "button success";
            document.getElementById("isConnected").innerHTML = "D√©connect√©";
            document.getElementById("isConnected").classList = "text-error";
            document.getElementById("infoCompte").style.display = "none";
        }
    })
</script>
</body>